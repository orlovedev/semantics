image: node:10-slim

cache:
  key: "$CI_COMMIT_REF_SLUG"
  paths:
  - node_modules/

tests:
  stage: test
  before_script:
  - apt-get update -qq && apt-get install -qq -y git
  - npm i -g yarn
  - yarn install
  script:
  - yarn style:check
  - yarn coverage:cover
  - yarn build:ci
  - CI_PROJECT_ID=$CI_PROJECT_ID PRIVATE_TOKEN=$CI_PRIVATE_TOKEN yarn start
